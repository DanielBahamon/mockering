<div class="_conta">
	<div class="row m-0">
		<div class="col-12 col-md-8 col-xl-9 p-md-3 p-0">
			<div class="row m-0">
				<div class="col-12 p-0">
					<% if @mock.movie.present? %>
					  <video id="my-video" class="video-js vjs-big-play-centered" controls preload="auto" data-setup="{}" style="width:100%; height:auto;" poster="<%= @mock.picture.url(:large) %>">
					    <source src="<%= video_path(@mock.movie) %>" type="video/mp4" />
					  </video>
					<% end %>
					<% if @mock.music.present? %>
						<% audio_tag(@mock.music, controls: true, styles: "width:100%;") %>
					<% end %>
				</div>
			</div>
			<br>
			<div class="row m-0">
				<div class="col-12">
					<h4 class="card-title _fw500"><%= @mock.title %></h4>
				</div>
			</div>
			<div class="row m-0">
				<div class="col-6">
					<div class="row m-0">
						<div class="col-auto p-0">
							<h5 class="m-0 _video_views _fw500"><i class="far fa-eye"></i> <% number_views = @mock.impressionist_count(:filter=>:ip_address, :filter=>:session_hash) %> <%= number_to_human(number_views, units: {billion: 'B' }) %></h5> 	
						</div>
						<div class="col-auto">
							<div class="d-table fullscreen">
								<div class="d-tablecell v-middle">
									<h5 class="_fw500 _fs90per m-0">â€¢ <%= @mock.created_at.strftime("%d %b %Y").downcase  %></h5>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-6">
					<div class="row float-right m-0">	
						<div class="col-auto" >
							<% if mocker_signed_in? %>
								<% if current_mocker %>
									<%= link_to like_mock_path(@mock), method: :put, remote: :true, class: "like-post" do %>
										<div id="like-count">
											<%= render 'mocks/likes', mock: @mock %>
										</div>
									<% end %>
								<% else %>
									<%= link_to new_mocker_session_path, class: 'like-post' do %>
										<div id="like-count">
											<%= render 'mocks/likes', mock: @mock %>
										</div>
									<% end %>
								<% end %>
							<% else %>
								<%= link_to new_mocker_session_path, class: "like-post" do %>
									<div id="dislike-count">
									<i class="far fa-thumbs-up" style="margin-right: 2px;"></i> <%= number_to_human(@mock.get_upvotes.size, units: { million: 'm', billion: 'b' }) %>
									</div>
								<% end %>
							<% end %>
						</div>
						<div class="col-auto">
							<% if mocker_signed_in? %>
								<% if current_mocker %>
									<%= link_to dislike_mock_path(@mock), method: :put, remote: :true, class: "like-post" do %>
										<div id="dislike-count">
											<%= render 'mocks/dislikes', mock: @mock %>
										</div>
									<% end %>
								<% else %>
									<%= link_to new_mocker_session_path, class: 'like-post' do %>
										<div id="dislike-count">
											<%= render 'mocks/dislikes', mock: @mock %>
										</div>
									<% end %>
								<% end %>
							<% else %>
								<%= link_to new_mocker_session_path, class: "like-post" do %>
									<div id="dislike-count">
									<i class="far fa-thumbs-down" style="margin-right: 2px;"></i> <%= number_to_human(@mock.get_downvotes.size, units: { thousand: 'k', million: 'm', billion: 'b' }) %>
									</div>
								<% end %>
							<% end %>
						</div>
					</div>
				</div>
			</div>
			<br>
			<div class="row m-0">
				<div class="col-12 readmore">
					<p class="video_description keepspaces"><%= auto_link(@mock.description).html_safe  %></p>
					<% if @mock.credits? %>
						<b>Credits:</b>
						<p><%= @mock.credits %></p>
					<% end %>
				</div>
			</div>
			<div class="row m-0">
				<div class="col-12 text-right">
					<% if current_mocker == @mock.mocker %>
						<div class="btn-group" role="group" aria-label="Basic example">
						  <%= link_to 'Edit', edit_mock_path, class: 'btn btn-outline-dark' %>
					      <%= link_to 'Delete', mock_path, method: :delete, data: {confirm: "Are you sure?"},class: 'btn btn-outline-secondary' %>
						</div>
					<% end %>
				</div>
			</div>
			<hr>
			<div class="row m-0">
				<div class="col-12 col-sm-1 col-md-auto">
					<div class="d-table fullscreen">
						<div class="d-tablecell v-middle text-center">
							<%= link_to @mock.mocker, class: "_color_black deco-none" do %><%= image_tag avatar_url(@mock.mocker), class: "_avatar _4" %><% end %>
						</div>
					</div>
				</div>
				<div class="col-12 col-sm-7 col-md-8 col-xl-9">
					<div class="d-table fullscreen">
						<div class="d-tablecell v-middle text-center-sm">
							<h4 class="_fw500 m-0"><%= link_to @mock.mocker, class: "_color_black deco-none" do %><%= @mock.mocker.first_name.capitalize if @mock.mocker.first_name? %> <%= @mock.mocker.last_name.capitalize if @mock.mocker.first_name? %><% end %></h4>
							<p class="text-muted _username_video _fw500 m-0"><%= link_to @mock.mocker, class: "_color_black deco-none" do %>@<%= @mock.mocker.slug %><% end %></p>
						</div>
					</div>
				</div>
				<div class="col-12 col-sm _col_follow">
					<% if mocker_signed_in? && current_mocker != @mock.mocker %>
						<% if current_mocker.following?(@mock.mocker) %>
							<%= button_to "Unfollow", friendships_path(mocker_id: @mock.mocker.id), method: :delete, class: "btn _btn _action m-0-auto unfollow" %>
							<br/>
						<% else %>
							<% if mocker_signed_in? %>
								<%= button_to "Follow", friendships_path(mocker_id: @mock.mocker.id), class: "btn _btn _action m-0-auto follow" %>
								<br/>
							<% else %>
								<%= link_to new_mocker_session_path, class: "btn _btn _action m-0-auto follow" do %>Follow<% end %>
							<% end %>
						<% end %>
					<% end %>
				</div>
			</div>
			<hr>
			<div class="row m-0">
				<div class="col-12 col-sm-6">
					<div class="d-table fullscreen">
						<div class="d-table-cell v-middle">
							<h5 class="_fw600">Reviews</h5>
						</div>
					</div>
				</div>
				<div class="col-12 col-sm" id="form_reviews">
				<% if mocker_signed_in? %>
					<%= render 'reviews/form' %>
				<% else %>
					<div class="d-table fullscreen">
					  <div class="d-table-cell v-middle">
					    <%= link_to new_mocker_session_path, class: "display-block btn _btn _1 _btncomment" do %>Comment<% end %>
					  </div> 
					</div>
					<br>
				<% end %>
				</div>
				<div class="col-12 p-0">
					<div class="reviews" id="reviews">
						<%= render 'reviews/list' %>
					</div>
				</div>
			</div>
		</div>
		<div class="col-12 col-md-4 col-xl-3">
		</div>
	</div>
</div>

<style type="text/css">
	#my-video{
		border-radius: 9px;
	}
	._col_follow{
	    padding-top: 4px;
	    padding: 0;
	    height: auto;
	    display: inherit;
	    text-align: center;
	}
	._w-maxcont{
		width: max-content;
	}
	._col_follow form {
		width: 100%;
	}
	@media(max-width: 575px){
		._col_follow{
    		margin-top: 10px;
    		max-width: inherit;
		}
		.text-center-sm{
			text-align: center;
		}
	}
	._col_follow form .btn{
		width:100%;
		padding: 8px 15px;
    	max-width: 150px;
	}
	/*._col_follow form{
	    display: table;
	    width: 100%;
	    height: 100%;
	}
	._col_follow form .btn{
	    display: table-cell;
	    vertical-align: middle;
	}*/
	._avatar._4{
	    width: 45px;
	    height: 45px;
	    border: 1px solid #eaeaea;
	    border-radius: 100%;
	    object-fit: cover;
	}
	._username_video{
		margin-top:10px;
		margin-bottom: 0;
	}
	a.link-2 {
	    margin-top: 10px;
	    margin-bottom: 15px;
	}
	.video_description{
		font-size: 11pt;
		color:#484848;
	}
	.vjs-poster{
		border-radius: 9px;
	}
	.video-js .vjs-tech{
		height: auto;
		position:inherit;
		max-height: 60vh;
	}
	.video-js{
		max-height: 60vh;
	}
	.video-js.vjs-fullscreen{
		max-height: inherit !important;
	}
	.video-js.vjs-fullscreen .vjs-tech{
		max-height: inherit !important;
	}
</style>

<script type="text/javascript">
	$('.readmore').readmore({
			speed: 75,
			collapsedHeight: 70,
			moreLink: '<a href="#" class="link-2">Show more</a>',
	  		lessLink: '<a href="#" class="link-2">Show less</a>'
		}
	);
</script>
